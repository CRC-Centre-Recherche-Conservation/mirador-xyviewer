<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!--
    Content Security Policy for demo application
    - default-src 'self': Only allow resources from same origin by default
    - script-src: Allow self, unsafe-inline (for Vite HMR), unsafe-eval (for dev tools)
    - style-src: Allow self, unsafe-inline (for MUI/emotion CSS-in-JS)
    - img-src: Allow self, data: URIs, https: for IIIF images
    - connect-src: Allow self, https: for IIIF manifests and datasets
    - font-src: Allow self and data: for embedded fonts
    - frame-ancestors 'none': Prevent clickjacking

    NOTE: For production, remove 'unsafe-eval' and use nonces for inline scripts
  -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self' 'unsafe-inline' 'unsafe-eval';
    style-src 'self' 'unsafe-inline';
    img-src 'self' data: https: blob:;
    connect-src 'self' https:;
    font-src 'self' data:;
    frame-ancestors 'none';
    base-uri 'self';
    form-action 'self';
  ">
  <title>Mirador XY Viewer - Scientific Annotations Demo</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
    }

    #mirador-container {
      width: 100vw;
      height: 100vh;
    }

    /* DevTools hint */
    .devtools-hint {
      position: fixed;
      bottom: 10px;
      right: 10px;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 8px 12px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 10000;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .devtools-hint.visible {
      opacity: 1;
    }
  </style>
</head>
<body>
  <div id="mirador-container"></div>
  <div id="devtools-hint" class="devtools-hint">
    Open DevTools (F12) â†’ React DevTools & Redux DevTools for debugging
  </div>

  <script type="module" src="./main.tsx"></script>

  <script>
    // Show DevTools hint briefly on load
    window.addEventListener('load', () => {
      const hint = document.getElementById('devtools-hint');
      hint.classList.add('visible');
      setTimeout(() => hint.classList.remove('visible'), 5000);
    });
  </script>
</body>
</html>
